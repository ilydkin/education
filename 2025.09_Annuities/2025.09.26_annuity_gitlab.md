# Annuity Calculation

- **Principal (P):** 100,000 USD  
- **Annual Interest Rate:** 12%  ⇒ **1% per month** (r)
- **Loan Term (n):** 12 months

## Differential System
If you borrow 100K USD at 12% annually for one year, you might expect to repay 112K USD — as if the interest were added only once at the end of the period. In reality, when the loan is repaid in monthly installments, the 12% interest is applied to the remaining balance each month (i.e. 1% monthly), making the total repay **106.5K USD**.

Here is how it works with a **differential schedule**:

| Month | Money in Use (Start Balance) | Total Installment | Principal Part | Interest Part | Balance After Payment |
|-------|-------------------------------|------------------|----------------|---------------|-----------------------|
| 1     | 100,000.00                    | 9,333.33         | 8,333.33       | 1,000.00      | 91,666.67             |
| 2     | 91,666.67                     | 9,250.00         | 8,333.33       | 916.67        | 83,333.34             |
| 3     | 83,333.34                     | 9,166.67         | 8,333.33       | 833.33        | 75,000.01             |
| 4     | 75,000.01                     | 9,083.33         | 8,333.33       | 750.00        | 66,666.68             |
| 5     | 66,666.68                     | 9,000.00         | 8,333.33       | 666.67        | 58,333.35             |
| 6     | 58,333.35                     | 8,916.67         | 8,333.33       | 583.33        | 50,000.02             |
| 7     | 50,000.02                     | 8,833.33         | 8,333.33       | 500.00        | 41,666.69             |
| 8     | 41,666.69                     | 8,750.00         | 8,333.33       | 416.67        | 33,333.36             |
| 9     | 33,333.36                     | 8,666.67         | 8,333.33       | 333.33        | 25,000.03             |
| 10    | 25,000.03                     | 8,583.33         | 8,333.33       | 250.00        | 16,666.70             |
| 11    | 16,666.70                     | 8,500.00         | 8,333.33       | 166.67        | 8,333.37              |
| 12    | 8,333.37                      | 8,416.67         | 8,333.33       | 83.33         | 0.00                  |

### Observations
- **Money in use** (loan balance) decreases linearly by ~8,333 each month.  
- **Principal part** is constant (8,333.33).  
- **Interest part** decreases as the balance shrinks.  
- **Total installment** decreases over time (differential strategy)

****

## Annuity System
Although the differential plan is simple, it has psychological downsides: the monthly installment varies, and the earliest payments feel the heaviest for the borrower. Marketing wisdom prefers **equal monthly payments**, which leads us to the **annuity** approach. 

Now, how do we keep payments flat while the balance shrinks? By **rebalancing the mix** within each installment. Early on, a larger share goes to **interest** and a smaller share to **principal**; over time, the **interest portion decreases** and the **principal portion increases**, keeping the **total payment constant** each month.

Here is how it works with an **annuity schedule**:

| Month | Money in Use (Start Balance) | Total Installment | Principal Part | Interest Part | Balance After Payment |
|------:|------------------------------:|------------------:|---------------:|--------------:|----------------------:|
| 1     | 100,000.00                    | 8,884.88          | 7,884.88       | 1,000.00      | 92,115.12             |
| 2     | 92,115.12                     | 8,884.88          | 7,963.73       | 921.15        | 84,151.39             |
| 3     | 84,151.39                     | 8,884.88          | 8,043.37       | 841.51        | 76,108.02             |
| 4     | 76,108.02                     | 8,884.88          | 8,123.80       | 761.08        | 67,984.22             |
| 5     | 67,984.22                     | 8,884.88          | 8,205.04       | 679.84        | 59,779.18             |
| 6     | 59,779.18                     | 8,884.88          | 8,287.09       | 597.79        | 51,492.09             |
| 7     | 51,492.09                     | 8,884.88          | 8,369.96       | 514.92        | 43,122.13             |
| 8     | 43,122.13                     | 8,884.88          | 8,453.66       | 431.22        | 34,668.47             |
| 9     | 34,668.47                     | 8,884.88          | 8,538.20       | 346.68        | 26,130.27             |
| 10    | 26,130.27                     | 8,884.88          | 8,623.58       | 261.30        | 17,506.69             |
| 11    | 17,506.69                     | 8,884.88          | 8,709.81       | 175.07        | 8,796.88              |
| 12    | 8,796.88                      | 8,884.85          | 8,796.88       | 87.97         | 0.00                  |

### Observations
- **Flat monthly payment:** 8,884.88 USD every month.  
- **Principal share:** smaller at first, grows over time.  
- **Interest share:** largest upfront and steadily declines.  
- **Total outlay:** **106,618.53 USD**, which exceeds the differential plan — convenience of level payments comes with extra cost


# Mathematics
Let’s treat the disbursed loan as the **present value** of a stream of equal payments,
discounted to today at the per-period rate \(r\):


```math
\mathrm{P} = \sum_{t=1}^{n} \frac{A}{(1+r)^t}
```


where:
- $P$: disbursed loan
- $A$: annuity payment each period 
- $r$: per-period interest/discount rate (e.g., monthly)
- $n$: number of payments  


### Deriving equations for \(P\) and \(A\)


```math
\mathrm{P} = \mathrm{A} \sum_{t=1}^{n} \frac{1}{(1+r)^t}
```


Where the sum is a *geometric series*, aka *present value interest factor of an annuity* **PVIFA**

```math
S = \sum_{t=1}^{n} \frac{1}{(1+r)^t}
```


### Step 1 — Expand the sum

```math
S=\frac{1}{1+r}+\frac{1}{(1+r)^2}+\cdots+\frac{1}{(1+r)^n}
```


### Step 2 — Multiply both sides by (1+r)

```math
(1+r)S
=1+\frac{1}{1+r}+\frac{1}{(1+r)^2}+\cdots+\frac{1}{(1+r)^{n-1}}
=1+\sum_{t=1}^{n-1}\frac{1}{(1+r)^t}
```


### Step 3 — Express the shortened sum via \(S\)

```math
\sum_{t=1}^{n-1}\frac{1}{(1+r)^t}
=\left(\sum_{t=1}^{n}\frac{1}{(1+r)^t}\right)-\frac{1}{(1+r)^n}
= S-\frac{1}{(1+r)^n}
```


### Step 4 — Substitute back:

```math
(1+r)S \;=\; 1 + S - (1+r)^{-n}
```


### Step 4 — Solve for \(S\)

```math
rS \;=\; 1 - (1+r)^{-n}
```


This is the **annuity factor** (PVIFA):

```math
S=\boxed{\frac{1-(1+r)^{-n}}{r}\,}
```


## Apply to an annuity with payment \(A\)

```math
P = A\,\frac{1-(1+r)^{-n}}{r}\,
```


```math
P = A \frac{\frac{(1+r)^n - 1}{(1+r)^n}}{r}
```


```math
\boxed{P = A \frac{(1+r)^n - 1}{r\, (1+r)^n}\,}
```


Solve for the payment:

```math
A = P\,\frac{r}{1-(1+r)^{-n}}\,
```



```math
A = P \frac{r}{\frac{(1+r)^n - 1}{(1+r)^n}}
```



```math
\boxed{A = P \frac{r (1+r)^n}{(1+r)^n - 1}\,}
```

